{"version":3,"sources":["webpack:///./src/components/Tooltip.vue","webpack:///./src/components/Tooltip.vue?027b","webpack:///./src/components/LendCareTr.vue","webpack:///./src/components/LendCareTr.vue?f9da","webpack:///./src/views/Vault.vue","webpack:///./src/views/Vault.vue?cd9e"],"names":["class","d","viewBox","focusable","data-icon","width","height","fill","aria-hidden","hidden","data","render","colspan","isShowAction","src","pool","token0src","token1src","lpName","isNew","formatBN","a1tob","substring","ibTotalSupply","decimals","ibBalance","wantBalance","token0addr","token1addr","href","addLp","depositAmt","type","placeholder","setDepositMax","depositReceive","needApprove","loading","approving","onApprove","depositing","onDeposit","withdrawAmt","setWithdrawMax","withdrawReceive","withdrawing","onWithdraw","components","Button","props","Object","default","ibToken","wantToken","watch","account","this","loadData","fbtoa","fatob","mounted","$store","state","methods","amt","isVault","totalTokenBalance","toString","totalShareBalance","dividedBy","multipliedBy","lendContract","vault","ERC20","totalSupply","allowance","lt","utils","parseUnits","getBalance","balanceOf","formatBNWithoutGroup","dp","deposit","value","tx","wait","console","log","eq","withdrawAll","withdraw","approve","BigNumber","from","pow","sub","tvl","pools","item","key","name","Tooltip","LendCareTr","filter","p","FTMUSDCVault","FTMUSDClp","getReserves","ftmUsdcReserves","ftmPrice","i","length","lp","token0","token1","toLowerCase","reserves","plus"],"mappings":"qIACOA,MAAM,e,EAYP,eAEQ,QADNC,EAAE,iLAA+K,S,EAEnL,eAEQ,QADNA,EAAE,oIAAkI,S,GAKtID,MAAM,iI,gDArBV,eA0BM,MA1BN,EA0BM,E,iBAzBJ,eAiBM,OAhBJE,QAAQ,gBACRC,UAAU,QACVC,YAAU,cACVC,MAAM,MACNC,OAAO,MACPC,KAAK,eACLC,cAAY,OACX,aAAU,+BAAE,EAAAC,QAAM,IAClB,aAAU,+BAAE,EAAAA,QAAM,K,CAEnB,EAGA,G,oBAIF,eAMM,MANN,EAGC,oHAGD,M,QALU,EAAAA,YAUC,OACbC,KADa,WAEX,MAAO,CACLD,QAAQ,KC/Bd,EAAOE,OAASA,EAED,U,uDCAPX,MAAM,qD,GACHA,MAAM,0B,GACJA,MAAM,qB,GAKNA,MAAM,qB,SAILA,MAAM,uD,GASZA,MAAM,qD,GACHA,MAAM,6B,GACNA,MAAM,W,GACNA,MAAM,W,GAGTA,MAAM,qD,GACHA,MAAM,6B,GACNA,MAAM,W,GAINA,MAAM,W,GAMTA,MAAM,U,GAKDA,MAAM,iF,GACgBA,MAAM,yB,GACLA,MAAM,0B,GAUlCY,QAAQ,IAAIZ,MAAM,Q,GACfA,MAAM,oD,GACJA,MAAM,oB,GACJA,MAAM,yB,iBAMR,iB,iBAKU,M,GAGRA,MAAM,4D,GAYNA,MAAM,sE,GACNA,MAAM,W,iBAAU,uB,GAGfA,MAAM,kB,iBAGyD,W,iBACX,W,EAG5D,eAA+B,OAA1BA,MAAM,eAAa,S,GACnBA,MAAM,oB,GACJA,MAAM,yB,GAKNA,MAAM,4D,GAYNA,MAAM,sE,GACNA,MAAM,W,iBAAU,uB,GAGfA,MAAM,kB,iBAGyC,Y,oIA7H7D,eAqDK,MApDHA,MAAK,CAAC,wFAAuF,cACrE,EAAAa,gB,CAExB,eAmBK,KAnBL,EAmBK,CAlBH,eAiBM,MAjBN,EAiBM,CAhBJ,eAGM,MAHN,EAGM,CAFJ,eAAuD,OAAlDb,MAAM,oBAAqBc,IAAK,EAAAC,KAAKC,W,gBAC1C,eAA0E,OAArEhB,MAAM,uCAAwCc,IAAK,EAAAC,KAAKE,W,kBAE/D,eAWM,YAVJ,eAMI,IANJ,EAMI,C,8BALC,EAAAF,KAAKG,QAAS,IACjB,GACQ,EAAAH,KAAKI,O,iBADb,eAGW,OAHX,EAGC,Q,wBAEH,eAEkG,GADhGnB,MAAM,kDAAgD,C,wBACvD,iBAAE,C,eAAF,KAAE,eAAG,EAAAe,KAAKG,QAAS,MAAG,eAAE,EAAAE,SAAS,EAAAC,MAAK,oBAAqB,IAAC,eAAG,EAAAN,KAAKG,OAAOI,UAAS,W,YAI3F,eAKK,KALL,EAKK,CAJH,eAGM,MAHN,EAGM,CAFJ,eAAiF,IAAjF,EAAiF,eAA3D,EAAAF,SAAS,EAAAG,cAAa,UAAc,EAAAR,KAAKS,YAAQ,GACvE,eAAwC,IAAxC,EAAwC,eAAlB,EAAAT,KAAKG,QAAM,OAGrC,eAWK,KAXL,EAWK,CAVH,eASM,MATN,EASM,CARJ,eAGI,IAHJ,EAGI,eAFC,EAAAE,SAAS,EAAAK,UAAS,UAAc,EAAAV,KAAKS,YAAc,IACtD,eAAG,EAAAT,KAAKG,QAAM,GAEhB,eAGI,IAHJ,EAGI,eAFC,EAAAE,SAAS,EAAAM,YAAW,UAAc,EAAAX,KAAKS,YAAc,IACxD,eAAG,EAAAT,KAAKG,OAAOI,UAAS,WAI9B,eAUK,KAVL,EAUK,CATH,eAQM,OAPJtB,MAAM,gDACL,QAAK,+BAAE,EAAAa,cAAgB,EAAAA,gB,CAExB,eAGM,MAHN,EAGM,C,eAFJ,eAA2D,IAA3D,EAA2D,W,QAAhD,EAAAA,gB,eACX,eAA6D,IAA7D,EAA6D,W,SAAjD,EAAAA,uB,GAMZ,EAAAA,c,iBADR,eA4EK,M,MA1EHb,MAAK,CAAC,yCAAwC,cACtB,EAAAa,gB,CAExB,eAsEK,KAtEL,EAsEK,CArEH,eAoEM,MApEN,EAoEM,CAnEJ,eAqCM,MArCN,EAqCM,CApCJ,eAaM,MAbN,EAaM,C,eAb6B,uBAEjC,eAAG,EAAAO,SAAS,EAAAM,YAAW,UAAc,EAAAX,KAAKS,YAAc,IACxD,eAAG,EAAAT,KAAKG,OAAOI,UAAS,IAAM,IAC9B,GACQ,EAAAP,KAAKY,YAAc,EAAAZ,KAAKa,Y,iBADhC,eAQW,gB,EAJT,eAGS,KAFP5B,MAAM,iBACL6B,KAAM,EAAAd,KAAKe,MAAM,EAAAf,KAAKY,WAAU,IAAO,EAAAZ,KAAKa,YAC9C,OAAI,Y,gCAGT,eAWM,MAXN,EAWM,C,eAVJ,eAKE,S,qDAJS,EAAAG,WAAU,IACnBC,KAAK,SACLC,YAAY,iBACZjC,MAAM,iD,mBAHG,EAAA+B,cAKX,eAGa,UAFV,QAAK,8BAAE,EAAAG,eAAA,EAAAA,cAAA,qBACRlC,MAAM,mHACP,SAEH,eASM,MATN,EASM,CARJ,eAKI,IALJ,EAKI,C,EAHF,eAE8E,OAF9E,EAEC,KAAE,eAAG,EAAAoB,SAAS,EAAAe,eAAc,qBAAwB,IAAC,eAAG,EAAApB,KAAKG,QAAM,KAEhB,EAAAkB,a,iBAAtD,eAAmF,G,MAA1EC,QAAS,EAAAC,UAAY,QAAO,EAAAC,W,yBAA8B,iBAAO,C,uDAC1E,eAAwE,G,MAA/DF,QAAS,EAAAG,WAAa,QAAO,EAAAC,W,yBAAkB,iBAAO,C,yCAGnE,EACA,eA2BM,MA3BN,EA2BM,CA1BJ,eAIM,MAJN,EAAmC,uBAEjC,eAAG,EAAArB,SAAS,EAAAK,UAAS,UAAc,EAAAV,KAAKS,YAAc,IACtD,eAAG,EAAAT,KAAKG,QAAM,GAEhB,eAWM,MAXN,EAWM,C,eAVJ,eAKE,S,qDAJS,EAAAwB,YAAW,IACpBV,KAAK,SACLC,YAAY,kBACZjC,MAAM,iD,mBAHG,EAAA0C,eAKX,eAGa,UAFV,QAAK,8BAAE,EAAAC,gBAAA,EAAAA,eAAA,qBACR3C,MAAM,mHACP,SAEH,eAQM,MARN,EAQM,CAPJ,eAKI,IALJ,EAKI,C,EAHF,eAE4F,OAF5F,EAEC,KAAE,eAAG,EAAAoB,SAAS,EAAAwB,gBAAe,qBAAwB,IAAC,eAAG,EAAA7B,KAAKG,OAAOI,UAAS,SAEjF,eAAoE,GAA3De,QAAS,EAAAQ,YAAc,QAAO,EAAAC,Y,yBAAY,iBAAQ,C,0NAgBxD,GACbC,WAAY,CACVC,SAAA,MAEFC,MAAO,CACLlC,KAAM,CACJiB,KAAMkB,OACNC,QAFI,WAGF,MAAO,MAIbzC,KAZa,WAaX,MAAO,CACLG,cAAc,EACduB,aAAa,EACbI,YAAY,EACZF,WAAW,EACXO,aAAa,EACbtB,cAAe,IACfE,UAAW,IACXC,YAAa,IACbK,WAAY,IACZI,eAAgB,IAChBO,YAAa,IACbE,gBAAiB,IACjBQ,QAAS,KACTC,UAAW,KACXhC,MAAO,MAGXiC,MAAO,CACL,gFAAwB,WAAgBC,GAAhB,iFAClBA,GACFC,KAAKC,WAFe,gDAAxB,yDAKMf,YAND,WAMe,wKACW,EAAKgB,MAAM,EAAKhB,aAD3B,OAClB,EAAKE,gBADa,qDAGdb,WATD,WASc,wKACW,EAAK4B,MAAM,EAAK5B,YAD3B,OACjB,EAAKI,eADY,sDAIfyB,QA5CO,WA4CG,wJACV,EAAKC,OAAOC,MAAMP,SACpB,EAAKE,WAFO,8CAKhBM,QAAS,CACDJ,MADC,SACKK,GAAK,2JACV,EAAKjD,KAAKkD,QADA,yCAEND,GAFM,mBAIR,IAAI,eAAUA,GAJN,KAKT,eALS,SAMJ,EAAKZ,QAAQc,oBANT,0BAM8BC,WAN9B,8BAOM,EAAKf,QAAQgB,oBAPnB,2BAOwCD,WAPxC,UAOXE,UAPW,uCAIWC,aAJX,gEAUXZ,MAXC,SAWKM,GAAK,2JACV,EAAKjD,KAAKkD,QADA,yCAEND,GAFM,mBAIR,IAAI,eAAUA,GAJN,KAKT,eALS,SAMJ,EAAKZ,QAAQgB,oBANT,0BAM8BD,WAN9B,8BAOM,EAAKf,QAAQc,oBAPnB,2BAOwCC,WAPxC,UAOXE,UAPW,uCAIWC,aAJX,gEAUXb,SArBC,WAqBU,+JACf,EAAKL,QAAU,eACb,EAAKrC,KAAKwD,aACV,EAAKxD,KAAKkD,QAAUO,EAAWpB,GAHlB,KAKE,OALF,SAMP,EAAKA,QAAQ,EAAKrC,KAAKkD,QAAU,YAAc,UANxC,2BAObQ,EAFF,EAAKpB,WALU,oBASX,EAAKtC,KAAKkD,QATC,kCAUM,EAAKN,MAAM,GAVjB,QAUb,EAAKtC,MAVQ,gCAYY,EAAK+B,QAAQsB,cAZzB,WAYf,EAAKnD,cAZU,OAcO,SAApB,EAAKR,KAAKG,OAdG,uBAeT,EAfS,yCAiBD,EAAKmC,UAAUsB,UACnB,EAAKd,OAAOC,MAAMP,QAClB,EAAKxC,KAAKwD,cAnBL,oBAqBPK,GAAG,OAAOC,MAAMC,WAAW,cAAe,EAAK/D,KAAKS,WArB7C,WAaf,EAAKY,YAbU,KAuBO,SAApB,EAAKrB,KAAKG,OAvBG,kCAwBH,iBAAc6D,WAAW,EAAKlB,OAAOC,MAAMP,SAxBxC,6DAyBH,EAAKF,UAAU2B,UAAU,EAAKnB,OAAOC,MAAMP,SAzBxC,mCAsBf,EAAK7B,YAtBU,eA0BQ,EAAK0B,QAAQ4B,UAAU,EAAKnB,OAAOC,MAAMP,SA1BjD,QA0Bf,EAAK9B,UA1BU,sDA4BjBS,cAjDO,WAkDLsB,KAAKzB,WAAayB,KAAKyB,qBAAqBzB,KAAK9B,YAAa,CAC5DF,SAAUgC,KAAKzC,KAAKS,SACpB0D,GAAI1B,KAAKzC,KAAKS,YAGlBmB,eAvDO,WAwDLa,KAAKd,YAAcc,KAAKyB,qBAAqBzB,KAAK/B,UAAW,CAC3DD,SAAUgC,KAAKzC,KAAKS,SACpB0D,GAAI1B,KAAKzC,KAAKS,YAGZiB,UA7DC,WA6DW,8KAEd,EAAKD,YAAa,EAFJ,SAGG,EAAKY,QAAQ+B,QAC5B,OAAON,MAAMC,WAAW,EAAK/C,WAAY,EAAKhB,KAAKS,UACnD,CACE4D,MACsB,SAApB,EAAKrE,KAAKG,OACN,OAAO2D,MAAMC,WAAW,EAAK/C,WAAY,EAAKhB,KAAKS,UACnD,IATI,cAGR6D,EAHQ,gBAYRA,EAAGC,OAZK,OAad,EAAK7B,WAbS,qDAed8B,QAAQC,IAAI,YAAZ,MAfc,yBAiBd,EAAKhD,YAAa,EAjBJ,gFAoBZM,WAjFC,WAiFY,8KAEf,EAAKD,aAAc,EAFJ,SAGG,IAAI,eAAU,EAAKpB,WAAWgE,GAC9C,OAAOZ,MAAMC,WAAW,EAAKpC,YAAa,EAAK3B,KAAKS,WAElD,EAAK4B,QAAQsC,cACb,EAAKtC,QAAQuC,SACX,OAAOd,MAAMC,WAAW,EAAKpC,YAAa,EAAK3B,KAAKS,WAR3C,cAGT6D,EAHS,gBAUTA,EAAGC,OAVM,OAWf,EAAK7B,WAXU,qDAaf8B,QAAQC,IAAI,YAAZ,MAbe,yBAef,EAAK3C,aAAc,EAfJ,gFAkBbN,UAnGC,WAmGW,8KAEd,EAAKD,WAAY,EAFH,SAGG,EAAKe,UAAUuC,QAC9B,EAAK7E,KAAKwD,aACV,OAAOsB,UAAUC,KAAK,KAAKC,IAAI,OAAOC,IAAI,MAL9B,cAGRX,EAHQ,gBAORA,EAAGC,OAPK,OAQd,EAAKlD,aAAc,EARL,qDAUdmD,QAAQC,IAAI,YAAZ,MAVc,yBAYd,EAAKlD,WAAY,EAZH,kFC/RtB,EAAO3B,OAASA,EAED,U,4DCJRX,MAAM,8B,GACJA,MAAM,8D,EACT,eAA4C,OAAvCA,MAAM,YAAW,oBAAgB,G,GAEpCA,MAAM,sH,GAEDA,MAAM,qB,GACJA,MAAM,gE,iBAA+D,wB,GAMvEA,MAAM,sC,GAGVA,MAAM,sE,GACJA,MAAM,sB,6UAjBf,eA+BM,MA/BN,EA+BM,CA9BJ,eAcM,MAdN,EAcM,CAbJ,EACA,eAWM,MAXN,EAWM,CARJ,eAKM,MALN,EAKM,CAJJ,eAGM,MAHN,EAGM,C,4BAGR,eAAkG,MAAlG,EAAgD,IAAC,eAAG,EAAAoB,SAAS,EAAA6E,IAAG,2BAGpE,eAcM,MAdN,EAcM,CAbJ,eAYM,MAZN,EAYM,CAXJ,EAQA,eAEM,a,mBADJ,eAA+E,2BAApD,EAAAC,OAAK,SAAbC,G,wBAAnB,eAA+E,GAA5CC,IAAKD,EAAKjF,OAASH,KAAMoF,G,yLAevD,GACbE,KAAM,OACNtD,WAAY,CACVuD,UAAA,KACAC,aAAA,MAEF7F,KANa,WAOX,MAAO,CACLD,QAAQ,EACRwF,IAAK,IAAI,IAAU,GACnBC,MAAO,OAAWM,QAAO,SAACC,GAAD,OAAOA,EAAExC,aAGtCX,MAAO,CACL,uBAAwB,SAAUC,GAC5BA,GACFC,KAAKC,aAIXG,QApBa,WAqBPJ,KAAKK,OAAOC,MAAMP,SACpBC,KAAKC,YAGTM,QAAS,CACDN,SADC,WACU,qLACf,EAAKwC,IAAM,IAAI,IAAU,KACnBS,EAAe,eAAY,OAAW,GAAGnC,aAAcC,GAF9C,KAGG,OAHH,SAGqBkC,EAAarD,YAHlC,+BAG+C,EAAxDsD,GAHS,6BAIeA,EAAUC,cAJzB,QAITC,EAJS,OAKTC,EAAW,IAAI,IAAUD,EAAgB,GAAG1C,YAC/CE,UAAU,KACVA,UACC,IAAI,IAAUwC,EAAgB,GAAG1C,YAAYE,UAAU,OAElD0C,EAAI,EAVE,aAUCA,EAAI,EAAKb,MAAMc,QAVhB,wBAWPP,EAAI,EAAKP,MAAMa,GACfhG,EAAO,eAAY0F,EAAElC,aAAcC,GAZ5B,UAaOzD,EAAKsC,YAbZ,eAaboD,EAAEpD,UAbW,OAcP4D,EAAK,eAAYR,EAAEpD,UAAW,GAdvB,UAeQ4D,EAAGC,SAfX,eAebT,EAAE9E,WAfW,iBAgBQsF,EAAGE,SAhBX,eAgBbV,EAAE7E,WAhBW,OAiBT6E,EAAE9E,WAAWyF,gBAAkB,OAAYA,gBAC7CX,EAAE9E,WAAa,OAEb8E,EAAE7E,WAAWwF,gBAAkB,OAAYA,gBAC7CX,EAAE7E,WAAa,OArBJ,UAwBU+E,EAAUC,cAxBpB,eAwBPS,EAxBO,YAyBF,EAAKpB,IAzBH,KA0BXa,EA1BW,KA4BP,IAAI,IAAUO,EAA0B,QAAjBZ,EAAE9E,WAAuB,EAAI,GAAGwC,YA5BhD,UA6BgBpD,EAAKmD,oBA7BrB,2BA6B0CC,WA7B1C,UA6BJG,aA7BI,0BA8Ba2C,EAAGvC,cA9BhB,oBA8B+BP,WA9B/B,UA8BJE,UA9BI,gBA+BJA,UAAU,MA/BN,WA2BRC,aA3BQ,gBAiCRA,aAAa,GARlB,EAAK2B,IAzBQ,KAyBOqB,KAzBP,yBAUwBP,IAVxB,iEClErB,EAAOpG,OAASA,EAED","file":"js/chunk-7cb83c64.cd78cf1f.js","sourcesContent":["<template>\n  <div class=\"hidden-wrap\">\n    <svg\n      viewBox=\"64 64 896 896\"\n      focusable=\"false\"\n      data-icon=\"info-circle\"\n      width=\"1em\"\n      height=\"1em\"\n      fill=\"currentColor\"\n      aria-hidden=\"true\"\n      @mouseenter=\"hidden = true\"\n      @mouseleave=\"hidden = false\"\n    >\n      <path\n        d=\"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z\"\n      ></path>\n      <path\n        d=\"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z\"\n      ></path>\n    </svg>\n    <div\n      v-show=\"hidden\"\n      class=\"duration-100 transition-all ease-linear absolute bottom-9 -right-8 w-72 bg-black bg-opacity-80 p-3 text-white text-sm rounded\"\n    >\n      Value of total LP tokens locked + deposits that are not borrowed +\n      ALPACA-BNB LP tokens staked + sALPACA staked\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      hidden: false,\n    };\n  },\n};\n</script>\n\n<style></style>\n","import { render } from \"./Tooltip.vue?vue&type=template&id=77b76682\"\nimport script from \"./Tooltip.vue?vue&type=script&lang=js\"\nexport * from \"./Tooltip.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <ul\n    class=\"flex flex-wrap md:flex-nowrap border-solid border-b border-last hover:bg-gray-50 pt-2\"\n    :class=\"{ 'bg-gray-50': isShowAction }\"\n  >\n    <li class=\"w-full md:w-5/12 mb-2 md:mb-0 flex justify-center\">\n      <div class=\"items-center pl-6 flex\">\n        <div class=\"w-10 md:w-14 mr-4\">\n          <img class=\"w-6 md:w-9 inline\" :src=\"pool.token0src\" />\n          <img class=\"w-6 md:w-9 inline z-0 -ml-3 md:-ml-4\" :src=\"pool.token1src\" />\n        </div>\n        <div>\n          <p class=\"text-xl font-bold\">\n            {{ pool.lpName }}\n            <span\n              v-if=\"pool.isNew\"\n              class=\"bg-green-400 text-white px-3 mx-auto text-sm shadow\"\n            >New</span>\n          </p>\n          <sapn\n            class=\"text-sm bg-gray-100 text-gray-500 rounded px-1\"\n          >1 {{ pool.lpName }} = {{formatBN(a1tob,{decimals:0,dp:2})}} {{ pool.lpName.substring(2) }}</sapn>\n        </div>\n      </div>\n    </li>\n    <li class=\"w-5/12 md:w-3/12 flex justify-center items-center\">\n      <div class=\"flex flex-col text-center\">\n        <p class=\"text-lg\">{{ formatBN(ibTotalSupply, { decimals: pool.decimals }) }}</p>\n        <p class=\"text-lg\">{{ pool.lpName }}</p>\n      </div>\n    </li>\n    <li class=\"w-5/12 md:w-3/12 flex justify-center items-center\">\n      <div class=\"flex flex-col text-center\">\n        <p class=\"text-lg\">\n          {{ formatBN(ibBalance, { decimals: pool.decimals }) }}\n          {{ pool.lpName }}\n        </p>\n        <p class=\"text-lg\">\n          {{ formatBN(wantBalance, { decimals: pool.decimals }) }}\n          {{ pool.lpName.substring(2) }}\n        </p>\n      </div>\n    </li>\n    <li class=\"w-2/12\">\n      <div\n        class=\"flex flex-col text-center py-6 cursor-pointer\"\n        @click=\"isShowAction = !isShowAction\"\n      >\n        <div class=\"cursor-not-allowed m-auto font-normal text-gray-500 relative md:static -top-9\">\n          <i v-show=\"isShowAction\" class=\"icon ion-chevron-down\"></i>\n          <i v-show=\"!isShowAction\" class=\"icon ion-chevron-right\"></i>\n        </div>\n      </div>\n    </li>\n  </ul>\n  <ul\n    v-if=\"isShowAction\"\n    class=\"border-b-20 border-white text-gray-400\"\n    :class=\"{ 'bg-gray-50': isShowAction }\"\n  >\n    <li colspan=\"4\" class=\"py-4\">\n      <div class=\"flex-col mx-6 md:flex md:flex-row justify-evenly\">\n        <div class=\"w-full md:w-5/12\">\n          <div class=\"text-sm text-gray-400\">\n            Available Balance:\n            {{ formatBN(wantBalance, { decimals: pool.decimals }) }}\n            {{ pool.lpName.substring(2) }}\n            <template\n              v-if=\"pool.token0addr && pool.token1addr\"\n            >\n              (Get the LP\n              <a\n                class=\"text-green-400\"\n                :href=\"pool.addLp+pool.token0addr + '/'+pool.token1addr\"\n              >here</a>)\n            </template>\n          </div>\n          <div class=\"w-full flex items-center border border-gray-200 bg-white\">\n            <input\n              v-model=\"depositAmt\"\n              type=\"number\"\n              placeholder=\"Deposit Amount\"\n              class=\"outline-none w-full h-10 rounded-md mt-1 pl-4\"\n            />\n            <button\n              @click=\"setDepositMax\"\n              class=\"focus:outline-none text-green-400 appearance-none outline-none h-4/5 border-l border-solid border-gray-200 w-20\"\n            >MAX</button>\n          </div>\n          <div class=\"mt-4 flex flex-wrap justify-center md:justify-between items-center\">\n            <p class=\"text-sm\">\n              You will receive:\n              <span\n                class=\"text-green-400\"\n              >~ {{ formatBN(depositReceive, {decimals:0,dp:18}) }} {{ pool.lpName }}</span>\n            </p>\n            <Button :loading=\"approving\" @click=\"onApprove\" v-if=\"needApprove\">Approve</Button>\n            <Button :loading=\"depositing\" @click=\"onDeposit\" v-else>Deposit</Button>\n          </div>\n        </div>\n        <div class=\"my-4 border\"></div>\n        <div class=\"w-full md:w-5/12\">\n          <div class=\"text-sm text-gray-400\">\n            Available Balance:\n            {{ formatBN(ibBalance, { decimals: pool.decimals }) }}\n            {{ pool.lpName }}\n          </div>\n          <div class=\"w-full flex items-center border border-gray-200 bg-white\">\n            <input\n              v-model=\"withdrawAmt\"\n              type=\"number\"\n              placeholder=\"Withdraw Amount\"\n              class=\"outline-none w-full h-10 rounded-md mt-1 pl-4\"\n            />\n            <button\n              @click=\"setWithdrawMax\"\n              class=\"focus:outline-none text-green-400 appearance-none outline-none h-4/5 border-l border-solid border-gray-200 w-20\"\n            >MAX</button>\n          </div>\n          <div class=\"mt-4 flex flex-wrap justify-center md:justify-between items-center\">\n            <p class=\"text-sm\">\n              You will receive:\n              <span\n                class=\"text-green-400\"\n              >~ {{ formatBN(withdrawReceive, {decimals:0,dp:18}) }} {{ pool.lpName.substring(2) }}</span>\n            </p>\n            <Button :loading=\"withdrawing\" @click=\"onWithdraw\">Withdraw</Button>\n          </div>\n        </div>\n      </div>\n    </li>\n  </ul>\n</template>\n\n<script>\nimport { getContract, getProvider } from \"@/utils/initWeb3\";\nimport ibTokenABI from \"@/assets/abi/ibToken.json\";\nimport vaultABI from \"@/assets/abi/vault.json\";\nimport ERC20ABI from \"@/assets/abi/ERC20.json\";\nimport { ethers } from \"ethers\";\nimport { BigNumber } from \"bignumber.js\";\nimport Button from \"./Button.vue\";\nexport default {\n  components: {\n    Button,\n  },\n  props: {\n    pool: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  data() {\n    return {\n      isShowAction: false,\n      needApprove: false,\n      depositing: false,\n      approving: false,\n      withdrawing: false,\n      ibTotalSupply: \"0\",\n      ibBalance: \"0\",\n      wantBalance: \"0\",\n      depositAmt: \"0\",\n      depositReceive: \"0\",\n      withdrawAmt: \"0\",\n      withdrawReceive: \"0\",\n      ibToken: null,\n      wantToken: null,\n      a1tob: \"1\",\n    };\n  },\n  watch: {\n    \"$store.state.account\": async function (account) {\n      if (account) {\n        this.loadData();\n      }\n    },\n    async withdrawAmt() {\n      this.withdrawReceive = await this.fbtoa(this.withdrawAmt);\n    },\n    async depositAmt() {\n      this.depositReceive = await this.fatob(this.depositAmt);\n    },\n  },\n  async mounted() {\n    if (this.$store.state.account) {\n      this.loadData();\n    }\n  },\n  methods: {\n    async fatob(amt) {\n      if (!this.pool.isVault) {\n        return amt;\n      }\n      return new BigNumber(amt).multipliedBy(\n        new BigNumber(\n          (await this.ibToken.totalTokenBalance()).toString()\n        ).dividedBy((await this.ibToken.totalShareBalance()).toString())\n      );\n    },\n    async fbtoa(amt) {\n      if (!this.pool.isVault) {\n        return amt;\n      }\n      return new BigNumber(amt).multipliedBy(\n        new BigNumber(\n          (await this.ibToken.totalShareBalance()).toString()\n        ).dividedBy((await this.ibToken.totalTokenBalance()).toString())\n      );\n    },\n    async loadData() {\n      this.ibToken = getContract(\n        this.pool.lendContract,\n        this.pool.isVault ? vaultABI : ibTokenABI\n      );\n      this.wantToken = getContract(\n        await this.ibToken[this.pool.isVault ? \"wantToken\" : \"want\"](),\n        ERC20ABI\n      );\n      if (this.pool.isVault) {\n        this.a1tob = await this.fatob(1);\n      }\n      this.ibTotalSupply = await this.ibToken.totalSupply();\n      this.needApprove =\n        this.pool.lpName == \"ibFTM\"\n          ? false\n          : (\n              await this.wantToken.allowance(\n                this.$store.state.account,\n                this.pool.lendContract\n              )\n            ).lt(ethers.utils.parseUnits(\"10000000000\", this.pool.decimals));\n      this.wantBalance =\n        this.pool.lpName == \"ibFTM\"\n          ? await getProvider().getBalance(this.$store.state.account)\n          : await this.wantToken.balanceOf(this.$store.state.account);\n      this.ibBalance = await this.ibToken.balanceOf(this.$store.state.account);\n    },\n    setDepositMax() {\n      this.depositAmt = this.formatBNWithoutGroup(this.wantBalance, {\n        decimals: this.pool.decimals,\n        dp: this.pool.decimals,\n      });\n    },\n    setWithdrawMax() {\n      this.withdrawAmt = this.formatBNWithoutGroup(this.ibBalance, {\n        decimals: this.pool.decimals,\n        dp: this.pool.decimals,\n      });\n    },\n    async onDeposit() {\n      try {\n        this.depositing = true;\n        const tx = await this.ibToken.deposit(\n          ethers.utils.parseUnits(this.depositAmt, this.pool.decimals),\n          {\n            value:\n              this.pool.lpName == \"ibFTM\"\n                ? ethers.utils.parseUnits(this.depositAmt, this.pool.decimals)\n                : 0,\n          }\n        );\n        await tx.wait();\n        this.loadData();\n      } catch (error) {\n        console.log(\"onDeposit\", error);\n      } finally {\n        this.depositing = false;\n      }\n    },\n    async onWithdraw() {\n      try {\n        this.withdrawing = true;\n        const tx = await (new BigNumber(this.ibBalance).eq(\n          ethers.utils.parseUnits(this.withdrawAmt, this.pool.decimals)\n        )\n          ? this.ibToken.withdrawAll()\n          : this.ibToken.withdraw(\n              ethers.utils.parseUnits(this.withdrawAmt, this.pool.decimals)\n            ));\n        await tx.wait();\n        this.loadData();\n      } catch (error) {\n        console.log(\"onDeposit\", error);\n      } finally {\n        this.withdrawing = false;\n      }\n    },\n    async onApprove() {\n      try {\n        this.approving = true;\n        const tx = await this.wantToken.approve(\n          this.pool.lendContract,\n          ethers.BigNumber.from(\"2\").pow(\"256\").sub(\"1\")\n        );\n        await tx.wait();\n        this.needApprove = false;\n      } catch (error) {\n        console.log(\"onApprove\", error);\n      } finally {\n        this.approving = false;\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./LendCareTr.vue?vue&type=template&id=6cf25e1c\"\nimport script from \"./LendCareTr.vue?vue&type=script&lang=js\"\nexport * from \"./LendCareTr.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"container mx-auto mt-4 p-4\">\n    <div class=\"flex justify-center items-end flex-wrap md:justify-between\">\n      <div class=\"text-2xl\">Available Vaults</div>\n      <div\n        class=\"flex flex-col items-center justify-center border border-solid border-gray-200 rounded-3xl p-4 px-8 bg-white shadow\"\n      >\n        <div class=\"flex items-center\">\n          <div class=\"relative flex items-center text-xl font-bold leading-10 mr-1\">\n            Total Value Locked\n            <Tooltip v-if=\"false\" class=\"ml-1\"></Tooltip>\n          </div>\n        </div>\n\n        <div class=\"text-3xl text-green-400 leading-10\">${{ formatBN(tvl, { decimals: 0, dp: 2 }) }}</div>\n      </div>\n    </div>\n    <div class=\"flex border border-solid rounded-3xl shadow bg-white p-6 px-0 mt-6\">\n      <div class=\"table-fixed w-full\">\n        <div>\n          <ul class=\"flex text-center\">\n            <li class=\"w-5/12 hidden md:block\"></li>\n            <li class=\"w-5/12 md:w-3/12\">Total Supply</li>\n            <li class=\"w-5/12 md:w-3/12\">Your Balance</li>\n            <li class=\"w-2/12\"></li>\n          </ul>\n        </div>\n        <div>\n          <LendCareTr v-for=\"item in pools\" :key=\"item.lpName\" :pool=\"item\"></LendCareTr>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Tooltip from \"@/components/Tooltip\";\nimport LendCareTr from \"@/components/LendCareTr\";\nimport { stakePools, wftmAddress } from \"@/config\";\nimport { getContract } from \"@/utils/initWeb3\";\nimport vaultABI from \"@/assets/abi/vault.json\";\nimport lpABI from \"@/assets/abi/LP.json\";\nimport BigNumber from \"bignumber.js\";\nexport default {\n  name: \"Lend\",\n  components: {\n    Tooltip,\n    LendCareTr,\n  },\n  data() {\n    return {\n      hidden: false,\n      tvl: new BigNumber(0),\n      pools: stakePools.filter((p) => p.isVault),\n    };\n  },\n  watch: {\n    \"$store.state.account\": function (account) {\n      if (account) {\n        this.loadData();\n      }\n    },\n  },\n  mounted() {\n    if (this.$store.state.account) {\n      this.loadData();\n    }\n  },\n  methods: {\n    async loadData() {\n      this.tvl = new BigNumber(\"0\");\n      const FTMUSDCVault = getContract(stakePools[8].lendContract, vaultABI);\n      const FTMUSDClp = getContract(await FTMUSDCVault.wantToken(), lpABI);\n      const ftmUsdcReserves = await FTMUSDClp.getReserves();\n      const ftmPrice = new BigNumber(ftmUsdcReserves[0].toString())\n        .dividedBy(1e6)\n        .dividedBy(\n          new BigNumber(ftmUsdcReserves[1].toString()).dividedBy(1e18)\n        );\n      for (let i = 0; i < this.pools.length; i++) {\n        const p = this.pools[i];\n        const pool = getContract(p.lendContract, vaultABI);\n        p.wantToken = await pool.wantToken();\n        const lp = getContract(p.wantToken, lpABI);\n        p.token0addr = await lp.token0();\n        p.token1addr = await lp.token1();\n        if (p.token0addr.toLowerCase() === wftmAddress.toLowerCase()) {\n          p.token0addr = \"FTM\";\n        }\n        if (p.token1addr.toLowerCase() === wftmAddress.toLowerCase()) {\n          p.token1addr = \"FTM\";\n        }\n        // 取 lp 余额\n        const reserves = await FTMUSDClp.getReserves();\n        this.tvl = this.tvl.plus(\n          ftmPrice\n            .multipliedBy(\n              new BigNumber(reserves[p.token0addr === \"FTM\" ? 0 : 1].toString())\n                .multipliedBy((await pool.totalTokenBalance()).toString())\n                .dividedBy((await lp.totalSupply()).toString())\n                .dividedBy(1e18)\n            )\n            .multipliedBy(2)\n        );\n        // console.log(\n        //   this.tvl.toString(),\n        //   (await lp.balanceOf(p.lendContract)).toString(),\n        //   reserves[p.token0addr === \"FTM\" ? 0 : 1].toString()\n        // );\n      }\n    },\n  },\n};\n</script>\n","import { render } from \"./Vault.vue?vue&type=template&id=75818898\"\nimport script from \"./Vault.vue?vue&type=script&lang=js\"\nexport * from \"./Vault.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}